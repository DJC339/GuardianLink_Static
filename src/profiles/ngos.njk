---
layout: layouts/base.html
title: NGO Profiles
contentWrapperClass: ""
permalink: /profiles/ngos/
---
{% import "components/gradient-search-header.njk" as ui %}
{% set ngoProfiles = profiles | filterByType(0) %}

<!-- NGO directory with search + carousel -->
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6">
  {{ ui.gradientSearchHeader(
    "Organizations",
    "NGO Profiles",
    "Explore NGOs seeking cyber support and connect to the mission that fits your skills.",
    "search-form",
    "search-input",
    "Search by name or email"
  ) }}

  <p class="text-sm text-slate-600 mb-2 sm:hidden">Swipe to browse</p>

  <div id="carousel" class="flex gap-4 sm:gap-6 overflow-x-auto pb-4 snap-x snap-mandatory">
    {% for profile in ngoProfiles %}
      {% set user = users | findUser(profile.user_id) %}
      {% set imgSrc = "/assets/images/" + (profile.profile_picture or "placeholder.png") %}
      {% set specialty = profile.organization_name or "Non-profit" %}
      <article class="profile-card card-surface w-72 shrink-0 snap-center p-6 flex flex-col items-center text-center gap-2 transition duration-300"
        data-name="{{ user.name }}"
        data-name-lower="{{ user.name | lower }}"
        data-email="{{ user.email }}"
        data-email-lower="{{ user.email | lower }}"
        data-specialty="{{ specialty }}"
        data-specialty-lower="{{ specialty | lower }}"
      >
        <img src="{{ imgSrc }}" alt="{{ user.name }}'s Profile Picture" class="current-profile-pic">
        <h2 class="text-lg font-semibold">{{ user.name }}</h2>
        <p class="text-slate-600 text-sm">{{ user.email }}</p>
        <span class="badge-role">{{ specialty }}</span>
        <div class="text-sm text-slate-700">
          {% if profile.concern %}<p><strong>Priority:</strong> {{ profile.concern }}</p>{% endif %}
          {% if profile.availability %}<p><strong>Engagement:</strong> {{ profile.availability }}</p>{% endif %}
        </div>
        <div class="mt-3 w-full">
          <a class="btn-secondary w-full justify-center" href="/profiles/{{ profile.id }}/">View Profile</a>
        </div>
      </article>
    {% endfor %}
  </div>

  <div id="empty-state" class="hidden mt-6 rounded-lg border border-brand-200 bg-brand-50 text-brand-800 px-4 py-3" role="alert">
    No NGO profiles available to display.
  </div>
</div>

<script>
  (function () {
    const carousel = document.getElementById('carousel');
    const searchForm = document.getElementById('search-form');
    const searchInput = document.getElementById('search-input');
    const emptyState = document.getElementById('empty-state');

    if (!carousel) return;

    const cards = Array.from(carousel.querySelectorAll('[data-name]'));
    if (cards.length === 0) {
      if (emptyState) emptyState.classList.remove('hidden');
      return;
    }

    window.requestAnimationFrame(() => {
      cards[0]?.scrollIntoView({ behavior: 'auto', inline: 'center', block: 'nearest' });
    });

    if (searchForm && searchInput) {
      searchForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const term = searchInput.value.trim().toLowerCase();
        if (!term) {
          carousel.scrollTo({ left: 0, behavior: 'smooth' });
          return;
        }
        const match = cards.find((card) => {
          const name = (card.dataset.nameLower || '').toLowerCase();
          const email = (card.dataset.emailLower || '').toLowerCase();
          const specialty = (card.dataset.specialtyLower || '').toLowerCase();
          return name.includes(term) || email.includes(term) || specialty.includes(term);
        });
        if (match) {
          match.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
          cards.forEach((card) => card.classList.remove('ring-2', 'ring-brand-500', 'shadow-2xl', 'scale-105'));
          match.classList.add('ring-2', 'ring-brand-500', 'shadow-2xl', 'scale-105');

          setTimeout(() => {
            match.classList.remove('ring-2', 'ring-brand-500', 'shadow-2xl', 'scale-105');
          }, 3500);
        }
      });
    }
  })();
</script>
